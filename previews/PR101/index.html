<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Introduction · for Julia!</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script><link href="assets/logo-300px.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href><img src="assets/logo.svg" alt="for Julia! logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href>for Julia!</a></span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Introduction</a><ul class="internal"><li><a class="tocitem" href="#Why?"><span>Why?</span></a></li><li><a class="tocitem" href="#Reading-and-writing-the-same-data-type"><span>Reading and writing the same data type</span></a></li><li><a class="tocitem" href="#Composability"><span>Composability</span></a></li><li><a class="tocitem" href="#[Array-layout-classes](@ref)-and-behavior"><span>Array layout classes and behavior</span></a></li></ul></li><li><a class="tocitem" href="getting_started/">Getting started</a></li><li><a class="tocitem" href="exampleusage/">Converting Arrays</a></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="types/">Types</a></li><li><a class="tocitem" href="functions/">Functions</a></li></ul></li><li><a class="tocitem" href="LICENSE/">LICENSE</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Introduction</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Introduction</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaHEP/AwkwardArray.jl/blob/main/docs/src/index.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h2 id="Why?"><a class="docs-heading-anchor" href="#Why?">Why?</a><a id="Why?-1"></a><a class="docs-heading-anchor-permalink" href="#Why?" title="Permalink"></a></h2><p><a href="https://github.com/scikit-hep/awkward">Awkward Array</a> is a library for manipulating large-scale arrays of nested, variable-sized data in Python, using array-oriented idioms: like NumPy, but for any JSON-like data. In Python, using array-oriented idioms to avoid imperative for loops is necessary for fast computations. In Julia, imperative code is already fast, thanks to JIT-compilation, so you may be wondering why this package exists.</p><p>This package is a complete, one-to-one implementation of the Awkward Array data structures in Julia, which makes it possible to zero-copy share data between the two languages. Python scripts can sneak out to Julia to run a calculation at high speed. Julia programs can duck into Python to access some code that has been written in that language. <a href="https://juliapy.github.io/PythonCall.jl">PythonCall &amp; JuliaCall</a> provide these capabilities (which this package uses) for ordinary data types; this package allows arrays of complex data to be shared as well.</p><p>Beyond communication with Python, columnar memory layouts have some advantages: data in an Awkward Array is less fragmented than the equivalent <code>Vectors</code> of <code>Vectors</code>, <code>NamedTuples</code>, <code>Missing</code>, and <code>Union</code> data of the built-in Julia types. Other, well-established packages provide some of these capabilities: <a href="https://github.com/JuliaArrays/ArraysOfArrays.jl">ArraysOfArrays.jl</a> does <code>Vectors</code> of variable-length <code>Vectors</code>, and <a href="https://github.com/JuliaArrays/StructArrays.jl">StructArrays.jl</a> toggles between array-of-structs/struct-of-arrays like Awkward records do, but Awkward Arrays represent a closure over a large suite of data types:</p><ul><li>booleans/numbers/dates/times</li><li>variable-length and regular-sized lists</li><li>structs with named (record) and unnamed (tuple) fields</li><li>missing data in a variety of representations (bit vectors, byte vectors, union-indexes)</li><li>heterogeneous unions</li></ul><p>with the ability to add metadata and overload behavior at every level. (For instance, an array of strings is an array of lists of bytes with overloaded methods, taking advantage of Julia&#39;s multiple dispatch.)</p><p>Additionally, <a href="https://github.com/apache/arrow-julia">arrow-julia</a> provides Julia access to the Apache Arrow format, which is also good for in-memory interprocess communication, but the Awkward Array format is a superset of this format to make it easier to represent intermediate calculations.</p><h2 id="Reading-and-writing-the-same-data-type"><a class="docs-heading-anchor" href="#Reading-and-writing-the-same-data-type">Reading and writing the same data type</a><a id="Reading-and-writing-the-same-data-type-1"></a><a class="docs-heading-anchor-permalink" href="#Reading-and-writing-the-same-data-type" title="Permalink"></a></h2><p>AwkwardArray.jl is a reimplementation of the concept of Awkward Arrays in Julia, taking advantage of Julia&#39;s capabilities. Python&#39;s Awkward Array has other backends for sending data to JIT-compiled languages—Numba (CPU and GPU) and C++ (with cppyy and ROOT&#39;s RDataFrame)—but as read-only views, owned exclusively by Python, for brief excursions only. Creating new Awkward Arrays in those JIT-compiled languages requires special tools, <a href="https://awkward-array.org/doc/main/reference/generated/ak.ArrayBuilder.html">ak.ArrayBuilder</a> (discovers data type during iteration) and <a href="https://awkward-array.org/doc/main/user-guide/how-to-use-header-only-layoutbuilder.html">LayoutBuilder</a> (fills a specified data type; faster).</p><p>In Julia, the array/builder dichotomy can be eliminated. Every Awkward Array is also a LayoutBuilder: they are appendable with the built-in <code>push!</code> and <code>append!</code> functions.</p><pre><code class="language-julia hljs">julia&gt; using AwkwardArray: Index64, ListOffsetArray, PrimitiveArray

julia&gt; array = ListOffsetArray{Index64,PrimitiveArray{Float64}}()
0-element ListOffsetArray{Vector{Int64}, PrimitiveArray{Float64, Vector{Float64}, :default}, :default}

julia&gt; push!(array, [1.1, 2.2, 3.3])
1-element ListOffsetArray{Vector{Int64}, PrimitiveArray{Float64, Vector{Float64}, :default}, :default}:
 [1.1, 2.2, 3.3]

julia&gt; push!(array, [4.4])
2-element ListOffsetArray{Vector{Int64}, PrimitiveArray{Float64, Vector{Float64}, :default}, :default}:
 [1.1, 2.2, 3.3]
 [4.4]

julia&gt; append!(array, [[5.5, 6.6], [7.7, 8.8, 9.9]])
4-element ListOffsetArray{Vector{Int64}, PrimitiveArray{Float64, Vector{Float64}, :default}, :default}:
 [1.1, 2.2, 3.3]
 [4.4]
 [5.5, 6.6]
 [7.7, 8.8, 9.9]</code></pre><p>This is the same type of array that can be iterated over</p><pre><code class="language-julia hljs">julia&gt; total = 0.0
0.0

julia&gt; for list in array
           for item in list
               total += item
           end
       end

julia&gt; total
49.5</code></pre><p>converted to and from Julia objects</p><pre><code class="language-julia hljs">julia&gt; using AwkwardArray

julia&gt; AwkwardArray.to_vector(array)
4-element Vector{Vector{Float64}}:
 [1.1, 2.2, 3.3]
 [4.4]
 [5.5, 6.6]
 [7.7, 8.8, 9.9]

julia&gt; AwkwardArray.from_iter(AwkwardArray.to_vector(array))
4-element ListOffsetArray{Vector{Int64}, PrimitiveArray{Float64, Vector{Float64}, :default}, :default}:
 [1.1, 2.2, 3.3]
 [4.4]
 [5.5, 6.6]
 [7.7, 8.8, 9.9]</code></pre><p>and passed to and from Python. Thus, AwkwardArray.jl is the only JIT-compiled Awkward Array backend that can own its own data.</p><h2 id="Composability"><a class="docs-heading-anchor" href="#Composability">Composability</a><a id="Composability-1"></a><a class="docs-heading-anchor-permalink" href="#Composability" title="Permalink"></a></h2><p>AwkwardArray.jl accepts any <code>AbstractVector</code> for index and data buffers, so that buffers on GPUs, data with units, etc. can be used in place of the usual <code>Vector</code> type.</p><p>None of AwkwardArray.jl&#39;s algorithms assume that these buffers are 1-indexed, so even <a href="https://github.com/JuliaArrays/OffsetArrays.jl">OffsetArrays.jl</a> could be used as buffers. This is also important because the data <em>in</em> the index buffers are 0-indexed, so that they can be zero-copy exchanged with Python.</p><h2 id="[Array-layout-classes](@ref)-and-behavior"><a class="docs-heading-anchor" href="#[Array-layout-classes](@ref)-and-behavior"><a href="types/#Array-layout-classes">Array layout classes</a> and behavior</a><a id="[Array-layout-classes](@ref)-and-behavior-1"></a><a class="docs-heading-anchor-permalink" href="#[Array-layout-classes](@ref)-and-behavior" title="Permalink"></a></h2><p>Any node in the data-type tree can carry <code>Dict{String,Any}</code> metadata as <code>parameters</code>, as well as a <code>behavior::Symbol</code> that can be used to define specialized behaviors. For instance, arrays of strings (constructed with <code>StringOffsetArray</code>, <code>StringArray</code>, or <code>StringRegularArray</code>) are defined by <code>behavior = :string</code> (instead of <code>behavior = :default</code>).</p><pre><code class="language-julia hljs">julia&gt; using AwkwardArray: StringOffsetArray

julia&gt; array = StringOffsetArray()
0-element ListOffsetArray{Vector{Int64}, PrimitiveArray{UInt8, Vector{UInt8}, :char}, :string}

julia&gt; append!(array, [&quot;one&quot;, &quot;two&quot;, &quot;three&quot;, &quot;four&quot;, &quot;five&quot;])
5-element ListOffsetArray{Vector{Int64}, PrimitiveArray{UInt8, Vector{UInt8}, :char}, :string}:
 &quot;one&quot;
 &quot;two&quot;
 &quot;three&quot;
 &quot;four&quot;
 &quot;five&quot;

julia&gt; array[3]
&quot;three&quot;

julia&gt; typeof(array[3])
String</code></pre><p>Most applications of <code>behavior</code> apply to <code>RecordArrays</code> (e.g. <a href="https://github.com/scikit-hep/vector">Vector</a> in Python).</p></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="getting_started/">Getting started »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Thursday 6 June 2024 13:06">Thursday 6 June 2024</span>. Using Julia version 1.10.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
